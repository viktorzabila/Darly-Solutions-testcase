{"ast":null,"code":"var _jsxFileName = \"/Users/macbook/Desktop/darly-solutions/src/App.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport InfiniteScroll from \"react-infinite-scroller\";\nimport { Box, CircularProgress, Container } from \"@mui/material\";\nimport { Modal } from \"./components/Modal\";\nimport { UsersData } from \"./components/UsersData/UsersData\";\nimport { ModalContext } from \"./modal-context\";\nimport { dataByPage } from \"./api/constants/const\";\nimport { client } from \"./api/fetch\";\nimport \"./index.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const App = () => {\n  _s();\n\n  const [users, setUsers] = useState([]);\n  const [, setError] = useState(\"\");\n  const [page, setPage] = useState(0);\n  const [hasMore, setHasMore] = useState(false);\n  const [, setModalContextValue] = useState();\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [isCreate, setIsCreate] = useState(false);\n  const addUser = useCallback(user => {\n    setUsers(prevUsers => [user, ...prevUsers]);\n  }, []);\n\n  const loadMoreUsers = async () => {\n    const response = await client.get(`?_page=${page + 1}&_limit=${dataByPage}`);\n    await setUsers(prevList => {\n      return [...prevList, ...response];\n    });\n\n    if (!response) {\n      setError(\"error\");\n    } else {\n      setPage(prev => prev + 1);\n    }\n  };\n\n  useEffect(() => {// const fetchData = async () => {\n    //   const response = await fetch(`${BASE_URL}?_page=${1}&_limit=${dataByPage}`);\n    //   if (!response.ok) {\n    //     throw new Error(`error with db ${response.statusText}`);\n    //   } else {\n    //     const total = Number(response.headers.get(\"X-Total-Count\"));\n    //     await setHasMore(total > page * dataByPage);\n    //   }\n    //   if (!response) {\n    //     setError(\"error\");\n    //   }\n    // };\n    // fetchData();\n    // fetch(`${BASE_URL}?_page=${1}&_limit=${dataByPage}`)\n    //   .then((response) => {\n    //     if (!response.ok) {\n    //       throw new Error(`error with db ${response.statusText}`);\n    //     }\n    //     const total = Number(response.headers.get(\"X-Total-Count\"));\n    //     setHasMore(total > page * dataByPage);\n    //   })\n    //   .catch((e) => setError(e));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"md\",\n    sx: {\n      pb: \"20px\"\n    },\n    children: /*#__PURE__*/_jsxDEV(ModalContext.Provider, {\n      value: {\n        create: isCreate,\n        open: isModalOpen,\n        setCreate: setIsCreate,\n        setItem: setModalContextValue,\n        setOpen: setIsModalOpen,\n        addUser: addUser\n      },\n      children: [/*#__PURE__*/_jsxDEV(InfiniteScroll, {\n        pageStart: 1,\n        loadMore: loadMoreUsers,\n        hasMore: hasMore,\n        loader: /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: \"flex\",\n            margin: \"20px\",\n            alignItems: \"center\",\n            justifyContent: \"center\"\n          },\n          children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this)\n        }, `${page * dataByPage}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this),\n        children: /*#__PURE__*/_jsxDEV(UsersData, {\n          users: users\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), isModalOpen ? /*#__PURE__*/_jsxDEV(Modal, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 24\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"haHBBiwMGN/D+i1WheiNLyMGbvg=\");\n\n_c = App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/macbook/Desktop/darly-solutions/src/App.tsx"],"names":["React","useCallback","useEffect","useState","InfiniteScroll","Box","CircularProgress","Container","Modal","UsersData","ModalContext","dataByPage","client","App","users","setUsers","setError","page","setPage","hasMore","setHasMore","setModalContextValue","isModalOpen","setIsModalOpen","isCreate","setIsCreate","addUser","user","prevUsers","loadMoreUsers","response","get","prevList","prev","pb","create","open","setCreate","setItem","setOpen","display","margin","alignItems","justifyContent"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\n\nimport InfiniteScroll from \"react-infinite-scroller\";\nimport { Box, CircularProgress, Container } from \"@mui/material\";\n\nimport { Modal } from \"./components/Modal\";\nimport { UsersData } from \"./components/UsersData/UsersData\";\nimport { ModalContext } from \"./modal-context\";\n\nimport { dataByPage } from \"./api/constants/const\";\nimport { BASE_URL, client } from \"./api/fetch\";\n\nimport { User } from \"./types/User\";\nimport \"./index.scss\";\n\nexport const App: React.FC = () => {\n  const [users, setUsers] = useState<User[]>([]);\n  const [, setError] = useState(\"\");\n  const [page, setPage] = useState(0);\n  const [hasMore, setHasMore] = useState(false);\n\n  const [, setModalContextValue] = useState<User>();\n  const [isModalOpen, setIsModalOpen] = useState<boolean>(false);\n  const [isCreate, setIsCreate] = useState<boolean>(false);\n\n  const addUser = useCallback((user: User) => {\n    setUsers((prevUsers) => [user, ...prevUsers]);\n  }, []);\n\n  const loadMoreUsers = async () => {\n    const response = await client.get<User>(`?_page=${page + 1}&_limit=${dataByPage}`);\n\n    await setUsers((prevList) => {\n      return [...prevList, ...response];\n    });\n\n    if (!response) {\n      setError(\"error\");\n    } else {\n      setPage((prev) => prev + 1);\n    }\n  };\n\n  useEffect(() => {\n    // const fetchData = async () => {\n    //   const response = await fetch(`${BASE_URL}?_page=${1}&_limit=${dataByPage}`);\n\n    //   if (!response.ok) {\n    //     throw new Error(`error with db ${response.statusText}`);\n    //   } else {\n    //     const total = Number(response.headers.get(\"X-Total-Count\"));\n\n    //     await setHasMore(total > page * dataByPage);\n    //   }\n    //   if (!response) {\n    //     setError(\"error\");\n    //   }\n    // };\n    // fetchData();\n    // fetch(`${BASE_URL}?_page=${1}&_limit=${dataByPage}`)\n    //   .then((response) => {\n    //     if (!response.ok) {\n    //       throw new Error(`error with db ${response.statusText}`);\n    //     }\n\n    //     const total = Number(response.headers.get(\"X-Total-Count\"));\n\n    //     setHasMore(total > page * dataByPage);\n    //   })\n    //   .catch((e) => setError(e));\n  }, []);\n\n  return (\n    <Container maxWidth=\"md\" sx={{ pb: \"20px\" }}>\n      <ModalContext.Provider\n        value={{\n          create: isCreate,\n          open: isModalOpen,\n          setCreate: setIsCreate,\n          setItem: setModalContextValue,\n          setOpen: setIsModalOpen,\n          addUser: addUser,\n        }}\n      >\n        <InfiniteScroll\n          pageStart={1}\n          loadMore={loadMoreUsers}\n          hasMore={hasMore}\n          loader={\n            <Box\n              sx={{\n                display: \"flex\",\n                margin: \"20px\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n              }}\n              key={`${page * dataByPage}`}\n            >\n              <CircularProgress />\n            </Box>\n          }\n        >\n          <UsersData users={users} />\n        </InfiniteScroll>\n        {isModalOpen ? <Modal /> : null}\n      </ModalContext.Provider>\n    </Container>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}